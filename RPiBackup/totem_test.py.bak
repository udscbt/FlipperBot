#!/usr/bin/env python
import RPi.GPIO as gpio
from time import sleep, time

led = 7
hit = 8

deltat = 13
blinkt = 5
period = 0.25
ledon = False

gpio.setmode(gpio.BOARD)
gpio.setup(led, gpio.OUT, initial=gpio.LOW)
gpio.setup(hit, gpio.IN)

while True:
  blink = False
  sleep(2)
  gpio.output(led, gpio.HIGH)
  last = time()
  while True:
    now = time()
    if not blink and now-last > deltat-blinkt:
      blink = True
      lastblink = now
    if blink and now - lastblink > period:
      ledon = not ledon
      lastblink = now
      gpio.output(led, ledon)
    if gpio.input(hit) or now-last > deltat:
      break
  gpio.output(led, gpio.LOW)
